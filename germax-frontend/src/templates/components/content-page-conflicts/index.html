<!-- Recherche de Conflits секция теперь collapsible -->
<div class="container mt-4">
	<h2>
		<button class="btn toggle-btn collapsed" type="button" data-bs-toggle="collapse"
			data-bs-target="#searchConflictsSection" aria-expanded="false" aria-controls="searchConflictsSection">
			<span class="btn-text">Recherche de Conflits</span>
			<span class="icon"><i class="fas fa-chevron-down"></i></span>
		</button>
	</h2>
	<div class="collapse" id="searchConflictsSection">
		<form id="searchConflictsForm">
			<div class="form-group">
				<label for="conflictType">Type de Conflit</label>
				<select class="form-control" id="conflictType">
					<option>Chevauchement des Réservations</option>
					<option>Dépassement de la limite d'utilisation</option>
					<option>Non-respect des exigences d'utilisation</option>
					<option>Retard dans le retour du matériel</option>
				</select>
			</div>
			<div class="form-row">
				<div class="col">
					<label for="startDate">Date de Début</label>
					<input type="date" class="form-control" id="startDate">
				</div>
				<div class="col">
					<label for="endDate">Date de Fin</label>
					<input type="date" class="form-control" id="endDate">
				</div>
			</div>
			<button type="button" class="btn btn-primary mt-3" data-bs-toggle="modal"
				data-bs-target="#conflictsDetectedModal">Montrer des conflits</button>
		</form>
	</div>
</div>

<div class="modal fade" id="conflictsDetectedModal" tabindex="-1" aria-labelledby="conflictsDetectedModalLabel"
	aria-hidden="true">
	<div class="modal-dialog modal-lg">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title" id="conflictsDetectedModalLabel">Conflits Détectés</h5>
				<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
			</div>
			<div class="modal-body">
				<div id="conflictsList" class="list-group">
					<div class="list-group-item">
						<h5 class="mb-3">Conflit #1</h5>
						<div class="d-flex w-100 justify-content-between">
							<h6 class="mb-1">Équipement: Projecteur 4K</h6>
							<small>Conflit de dates</small>
						</div>
						<p class="mb-1">Utilisateur 1: Jean Dupont - 12/04/2023 10:00 à 12/04/2023 12:00</p>
						<p class="mb-1">Utilisateur 2: Marie Curie - 12/04/2023 11:00 à 12/04/2023 13:00</p>
						<button class="btn btn-primary mt-2" data-bs-toggle="modal"
							data-bs-target="#resolveConflictModal">Résoudre</button>
					</div>
					<!-- Дополнительные конфликты можно добавить здесь -->
				</div>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fermer</button>
			</div>
		</div>
	</div>
</div>

<!-- Utilisation d'Équipement -->

<!-- Modal for Resolving Conflict -->
<div class="modal fade" id="resolveConflictModal" tabindex="-1" aria-labelledby="resolveConflictModalLabel"
	aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title" id="resolveConflictModalLabel">Résolution du Conflit</h5>
				<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
			</div>
			<div class="modal-body">
				<form>
					<div class="mb-3">
						<label for="conflictResolutionAction" class="form-label">Action</label>
						<select class="form-select" id="conflictResolutionAction">
							<option value="cancel_first">Annuler la première réservation</option>
							<option value="cancel_second">Annuler la seconde réservation</option>
							<option value="reschedule">Reprogrammer les réservations</option>
							<option value="do_nothing">Proposer un équipement alternatif</option>
						</select>
					</div>
					<!-- Additional fields for action details can be added here -->
				</form>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annuler</button>
				<button type="button" class="btn btn-primary">Appliquer</button>
			</div>
		</div>
	</div>
</div>

<!-- Действия для решения 2 сценария -->
<div class="modal fade" id="resolveConflictModal-2" tabindex="-1" aria-labelledby="resolveConflictModalLabel"
	aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title" id="resolveConflictModalLabel">Résolution du Conflit</h5>
				<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
			</div>
			<div class="modal-body">
				<form>
					<div class="mb-3">
						<label for="conflictResolutionAction" class="form-label">Action de résolution</label>
						<select class="form-select" id="conflictResolutionAction">
							<!-- Действия для решения 2 сценария -->
							<option value="notify_user">Notifier l'utilisateur du dépassement</option>
							<option value="limit_booking">Limiter les réservations futures</option>
						</select>
					</div>
					<!-- Additional fields for action details can be added here -->
				</form>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annuler</button>
				<button type="button" class="btn btn-primary">Appliquer</button>
			</div>
		</div>
	</div>
</div>

<!-- Действия для решения 3 сценария -->
<div class="modal fade" id="resolveConflictModal-3" tabindex="-1" aria-labelledby="resolveConflictModalLabel"
	aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title" id="resolveConflictModalLabel">Résolution du Conflit</h5>
				<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
			</div>
			<div class="modal-body">
				<form>
					<div class="mb-3">
						<label for="conflictResolutionAction" class="form-label">Action de résolution</label>
						<select class="form-select" id="conflictResolutionAction">
							<!-- Действия для решения 3 сценария -->
							<option value="cancel_booking">Annuler la réservation</option>
							<option value="discuss_alternatives">Discuter des alternatives</option>
						</select>
					</div>
					<!-- Additional fields for action details can be added here -->
				</form>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annuler</button>
				<button type="button" class="btn btn-primary">Appliquer</button>
			</div>
		</div>
	</div>
</div>

<!-- Действия для решения 4 сценария -->
<div class="modal fade" id="resolveConflictModal-4" tabindex="-1" aria-labelledby="resolveConflictModalLabel"
	aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title" id="resolveConflictModalLabel">Résolution du Conflit</h5>
				<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
			</div>
			<div class="modal-body">
				<form>
					<div class="mb-3">
						<label for="conflictResolutionAction" class="form-label">Action de résolution</label>
						<select class="form-select" id="conflictResolutionAction">
							<option value="send_reminder">Envoyer un rappel de retour</option>
							<option value="apply_penalties">Appliquer des sanctions</option>
							<option value="offer_alternative">Proposer un équipement alternatif</option>
						</select>
					</div>
					<!-- Additional fields for action details can be added here -->
				</form>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annuler</button>
				<button type="button" class="btn btn-primary">Appliquer</button>
			</div>
		</div>
	</div>
</div>

<div class="container mt-4">
	<!-- Вкладки для переключения между активными и завершенными резервациями -->
	<div class="nav nav-tabs" id="conflictTabs" role="tablist">
		<!-- Вкладка активных резерваций -->
		<a class="nav-link active" id="active-conflicts-tab" data-bs-toggle="tab" href="#activeConflicts" role="tab"
			aria-controls="activeConflicts" aria-selected="true">Conflits actifs</a>
		<!-- Вкладка активных конфликтов -->
		<a class="nav-link" id="resolved-conflicts-tab" data-bs-toggle="tab" href="#resolvedConflicts" role="tab"
			aria-controls="resolvedConflicts" aria-selected="false">Conflits résolus</a>
	</div>

	<!-- Содержимое вкладок -->
	<div class="tab-content" id="conflictTabsContent">
		<!-- Вкладка Активные конфликты -->
		<div class="tab-pane fade show active" id="activeConflicts" role="tabpanel"
			aria-labelledby="active-conflicts-tab">
			<h2>Derniers Conflits Détectés</h2>
			<div class="table-responsive">
				<table class="table" id="conflictsTable">
					<thead>
						<tr>
							<th data-column="idRapport" data-type="number">ID Rapport<button
									class="btn btn-link p-0 border-0 sortButton"><i class="fas fa-sort"></i></button>
							</th>
							<th data-column="typeDeRapport" data-type="text">Type de Rapport
							</th>
							<th data-column="status" data-type="text">Status<button
									class="btn btn-link p-0 border-0 sortButton"><i class="fas fa-sort"></i></button>
							</th>
							<th data-column="dateDeclaration" data-type="date">Date de Déclaration<button
									class="btn btn-link p-0 border-0 sortButton"><i class="fas fa-sort"></i></button>
							</th>
							<th data-column="dateRamassage" data-type="date">Date de Ramassage<button
									class="btn btn-link p-0 border-0 sortButton"><i class="fas fa-sort"></i></button>
							</th>
							<th data-column="conflictDescription" data-type="text">Description</th>
							<th data-column="idUtilisateur" data-type="number">ID Utilisateur<button
									class="btn btn-link p-0 border-0 sortButton"><i class="fas fa-sort"></i></button>
							</th>
							<th data-column="idPret" data-type="number">ID Prêt<button
									class="btn btn-link p-0 border-0 sortButton"><i class="fas fa-sort"></i></button>
							</th>
							<th>Actions</th>
						</tr>
					</thead>
					<tbody>
						<tr data-id-rapport="1" data-type-de-rapport="Utilisation d'Équipement" data-status="Actif"
							data-date-declaration="2023-04-12" data-date-ramassage="2023-04-15"
							data-conflict-description="Chevauchement des Réservations" data-id-utilisateur="2"
							data-id-pret="5">
							<td>1</td>
							<td>Utilisation d'Équipement</td>
							<td>
								<span class="view-mode">Actif</span>
								<select class="edit-mode d-none">
									<option value="Actif">Actif</option>
									<option value="Waiting">En attente</option>
									<option value="Cancelled">Annulé</option>
								</select>
							</td>
							<td>
								<span class="view-mode" data-name="startdate">2023-04-01</span>
								<input type="date" class="edit-mode d-none" name="startdate" value="2023-04-01">
								<span class="error-message d-none"></span> <!-- Элемент для сообщения об ошибке -->
							</td>
							<td>
								<span class="view-mode" data-name="enddate">2023-04-03</span>
								<input type="date" class="edit-mode d-none" name="enddate" value="2023-04-03">
								<span class="error-message d-none"></span> <!-- Элемент для сообщения об ошибке -->
							</td>
							<td>Chevauchement des Réservations</td>
							<td>2</td>
							<td>5</td>
							<td>
								<div class="dropdown">
									<button class="btn btn-secondary dropdown-toggle" type="button"
										id="dropdownMenuButton1" data-bs-toggle="dropdown" aria-expanded="false">
										Choisir une action
									</button>
									<ul class="dropdown-menu" aria-labelledby="dropdownMenuButton1">
										<li><a class="dropdown-item edit-conflict" href="#">Éditer</a></li>
										<li>
											<a class="dropdown-item delete-action" href="#">Supprimer</a>
										</li>
										<li>
											<a class="dropdown-item view-details" href="#" data-bs-toggle="modal"
												data-bs-target="#detailsModal">Voir les détails</a>
										</li>
										<li><a class="dropdown-item archive-action" href="#">Archiver</a></li>
										<li class="dropdown-item d-none restore-action" data-equipment-id="1"><a
												href="#">Rétablir</a></li>
										<li> <a class="dropdown-item resolve-action" data-bs-toggle="modal" href="#"
												data-bs-target="#resolveConflictModal">Résoudre le conflit</a>
										</li>
									</ul>
								</div>
							</td>
						</tr>
						<tr data-id-rapport="2" data-type-de-rapport="Utilisation d'Équipement" data-status="Actif"
							data-date-declaration="2023-04-12" data-date-ramassage="2023-04-15"
							data-conflict-description="Dépassement de la limite d'utilisation" data-id-utilisateur="3"
							data-id-pret="6">
							<td>2</td>
							<td>Utilisation d'Équipement</td>
							<td>Actif</td>
							<td>2023-04-12</td>
							<td>2023-04-15</td>
							<td>Dépassement de la limite d'utilisation</td>
							<td>3</td>
							<td>6</td>
							<td>
								<button class="btn btn-primary" data-bs-toggle="modal"
									data-bs-target="#resolveConflictModal-2">Résoudre</button>
							</td>
						</tr>
						<tr data-id-rapport="3" data-type-de-rapport="Utilisation d'Équipement" data-status="Inactif"
							data-date-declaration="2023-05-20" data-date-ramassage="2023-05-22"
							data-conflict-description="Non-respect des exigences d'utilisation" data-id-utilisateur="4"
							data-id-pret="7">
							<td>3</td>
							<td>Utilisation d'Équipement</td>
							<td>Inactif</td>
							<td>2023-05-20</td>
							<td>2023-05-22</td>
							<td>Non-respect des exigences d'utilisation</td>
							<td>4</td>
							<td>7</td>
							<td>
								<button class="btn btn-primary" data-bs-toggle="modal"
									data-bs-target="#resolveConflictModal-3">Résoudre</button>
							</td>
						</tr>
						<tr data-id-rapport="4" data-type-de-rapport="Utilisation d'Équipement" data-status="En attente"
							data-date-declaration="2023-06-01" data-date-ramassage="2023-06-03"
							data-conflict-description="Retard dans le retour du matériel" data-id-utilisateur="5"
							data-id-pret="8">
							<td>4</td>
							<td>Utilisation d'Équipement</td>
							<td>En attente</td>
							<td>2023-06-01</td>
							<td>2023-06-03</td>
							<td>Retard dans le retour du matériel</td>
							<td>5</td>
							<td>8</td>
							<td>
								<button class="btn btn-primary" data-bs-toggle="modal"
									data-bs-target="#resolveConflictModal-4">Résoudre</button>
							</td>
						</tr>
					</tbody>
				</table>
			</div>
		</div>

		<!-- Вкладка Завершенные конфликты -->
		<div class="tab-pane fade" id="resolvedConflicts" role="tabpanel" aria-labelledby="resolved-conflicts-tab">
			<h2>Conflits Résolus</h2>
			<div class="table-responsive">
				<table class="table" id="resolvedConflictsTable">
					<!-- Сюда можно вставить разметку для таблицы с архивированными резервациями, если у вас она есть -->
					<thead>
						<th data-column="idRapport" data-type="number">ID Rapport<button
								class="btn btn-link p-0 border-0 sortButton"><i class="fas fa-sort"></i></button>
						</th>
						<th data-column="typeDeRapport" data-type="text">Type de Rapport<button
								class="btn btn-link p-0 border-0 sortButton"><i class="fas fa-sort"></i></button>
						</th>
						<th data-column="status" data-type="text">Status<button
								class="btn btn-link p-0 border-0 sortButton"><i class="fas fa-sort"></i></button>
						</th>
						<th data-column="dateDeclaration" data-type="date">Date de Déclaration<button
								class="btn btn-link p-0 border-0 sortButton"><i class="fas fa-sort"></i></button>
						</th>
						<th data-column="dateRamassage" data-type="date">Date de Ramassage<button
								class="btn btn-link p-0 border-0 sortButton"><i class="fas fa-sort"></i></button>
						</th>
						<th>Description</th>
						<th data-column="idUtilisateur" data-type="number">ID Utilisateur<button
								class="btn btn-link p-0 border-0 sortButton"><i class="fas fa-sort"></i></button>
						</th>
						<th data-column="idPret" data-type="number">ID Prêt<button
								class="btn btn-link p-0 border-0 sortButton"><i class="fas fa-sort"></i></button>
						</th>
						<th>Actions</th>
					</thead>
					<tbody>
						<!-- Заполните данными об архивированных резервациях -->
					</tbody>
				</table>
			</div>
		</div>
	</div>
</div>
